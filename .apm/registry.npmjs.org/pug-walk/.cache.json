{"_id":"pug-walk","_rev":"17-a4f4dfc2afdf834107dd18383fdb234e","name":"pug-walk","description":"Walk and transform a pug AST","dist-tags":{"latest":"1.1.3"},"versions":{"0.0.0":{"name":"pug-walk","version":"0.0.0","description":"Walk and transform a jade AST","keywords":["jade"],"dependencies":{},"devDependencies":{"pug-lexer":"^0.0.0","pug-parser":"^0.0.0"},"scripts":{"test":"node test"},"repository":{"type":"git","url":"https://github.com/jadejs/jade-walk.git"},"author":{"name":"ForbesLindesay"},"license":"MIT","gitHead":"70758dfd7da3727ef51a17e0852d30b8fe1d4bb2","bugs":{"url":"https://github.com/jadejs/jade-walk/issues"},"homepage":"https://github.com/jadejs/jade-walk","_id":"pug-walk@0.0.0","_shasum":"d16ed9429e6ae71698fedeeaee4734ea81ecd52a","_from":".","_npmVersion":"2.7.1","_nodeVersion":"1.6.2","_npmUser":{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},"dist":{"shasum":"d16ed9429e6ae71698fedeeaee4734ea81ecd52a","tarball":"https://registry.npmjs.org/pug-walk/-/pug-walk-0.0.0.tgz"},"maintainers":[{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"}],"directories":{}},"0.0.3":{"name":"pug-walk","version":"0.0.3","description":"Walk and transform a pug AST","keywords":["pug"],"dependencies":{},"devDependencies":{"pug-lexer":"^1.0.0","pug-parser":"^1.0.0"},"scripts":{"test":"node test"},"repository":{"type":"git","url":"https://github.com/pugjs/pug-walk.git"},"author":{"name":"ForbesLindesay"},"license":"MIT","gitHead":"713aa9906fcf8025457fca927446f4dee95386a6","bugs":{"url":"https://github.com/pugjs/pug-walk/issues"},"homepage":"https://github.com/pugjs/pug-walk","_id":"pug-walk@0.0.3","_shasum":"c28be7bcc540f24b83d274472410827c84e31ac6","_from":".","_npmVersion":"2.7.1","_nodeVersion":"1.6.2","_npmUser":{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},"dist":{"shasum":"c28be7bcc540f24b83d274472410827c84e31ac6","tarball":"https://registry.npmjs.org/pug-walk/-/pug-walk-0.0.3.tgz"},"maintainers":[{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"}],"directories":{}},"0.0.4":{"name":"pug-walk","version":"0.0.4","description":"Walk and transform a pug AST","keywords":["pug"],"dependencies":{},"devDependencies":{"istanbul":"*","pug-lexer":"^1.0.0","pug-parser":"^1.0.0"},"scripts":{"test":"node test","coverage":"istanbul cover test.js"},"repository":{"type":"git","url":"git+https://github.com/pugjs/pug-walk.git"},"author":{"name":"ForbesLindesay"},"license":"MIT","gitHead":"568272940de7736dededd77415e9afea5117d41b","bugs":{"url":"https://github.com/pugjs/pug-walk/issues"},"homepage":"https://github.com/pugjs/pug-walk#readme","_id":"pug-walk@0.0.4","_shasum":"dbacda02d1a3b9d979468984cadcf4d4d19a0e23","_from":".","_npmVersion":"3.10.5","_nodeVersion":"6.3.1","_npmUser":{"name":"timothygu","email":"timothygu99@gmail.com"},"dist":{"shasum":"dbacda02d1a3b9d979468984cadcf4d4d19a0e23","tarball":"https://registry.npmjs.org/pug-walk/-/pug-walk-0.0.4.tgz"},"maintainers":[{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},{"name":"timothygu","email":"timothygu99@gmail.com"}],"_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/pug-walk-0.0.4.tgz_1471397932459_0.4809441489633173"},"directories":{}},"1.0.0":{"name":"pug-walk","version":"1.0.0","description":"Walk and transform a pug AST","keywords":["pug"],"dependencies":{},"devDependencies":{"istanbul":"*","pug-lexer":"^2.1.0","pug-parser":"^2.0.1","testit":"^2.1.2"},"scripts":{"test":"node test","coverage":"istanbul cover test"},"files":["index.js"],"repository":{"type":"git","url":"git+https://github.com/pugjs/pug-walk.git"},"author":{"name":"ForbesLindesay"},"license":"MIT","gitHead":"eb1c80bd7d8cb83e62fd927a0f8bca293a605c35","bugs":{"url":"https://github.com/pugjs/pug-walk/issues"},"homepage":"https://github.com/pugjs/pug-walk#readme","_id":"pug-walk@1.0.0","_shasum":"7f4ae1456a4f18feee40a0d708b75c1c51d2e4e4","_from":".","_npmVersion":"3.10.7","_nodeVersion":"6.3.1","_npmUser":{"name":"timothygu","email":"timothygu99@gmail.com"},"dist":{"shasum":"7f4ae1456a4f18feee40a0d708b75c1c51d2e4e4","tarball":"https://registry.npmjs.org/pug-walk/-/pug-walk-1.0.0.tgz"},"maintainers":[{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},{"name":"timothygu","email":"timothygu99@gmail.com"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/pug-walk-1.0.0.tgz_1471913142178_0.11957901529967785"},"directories":{}},"1.1.0":{"name":"pug-walk","version":"1.1.0","description":"Walk and transform a pug AST","keywords":["pug"],"dependencies":{},"devDependencies":{"pug-lexer":"^2.3.1","pug-parser":"^2.0.2"},"files":["index.js"],"repository":{"type":"git","url":"git+https://github.com/pugjs/pug-walk.git"},"author":{"name":"ForbesLindesay"},"license":"MIT","bugs":{"url":"https://github.com/pugjs/pug-walk/issues"},"homepage":"https://github.com/pugjs/pug-walk#readme","_id":"pug-walk@1.1.0","scripts":{},"_shasum":"f784cf94215d70ade49f1fc05c736dc741623051","_from":".","_npmVersion":"3.10.3","_nodeVersion":"6.4.0","_npmUser":{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},"maintainers":[{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},{"name":"timothygu","email":"timothygu99@gmail.com"}],"dist":{"shasum":"f784cf94215d70ade49f1fc05c736dc741623051","tarball":"https://registry.npmjs.org/pug-walk/-/pug-walk-1.1.0.tgz"},"_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/pug-walk-1.1.0.tgz_1485220049711_0.131509616272524"},"directories":{}},"1.1.1":{"name":"pug-walk","version":"1.1.1","description":"Walk and transform a pug AST","keywords":["pug"],"dependencies":{},"devDependencies":{"pug-lexer":"^3.0.0","pug-parser":"^2.0.2"},"files":["index.js"],"repository":{"type":"git","url":"git+https://github.com/pugjs/pug-walk.git"},"author":{"name":"ForbesLindesay"},"license":"MIT","bugs":{"url":"https://github.com/pugjs/pug-walk/issues"},"homepage":"https://github.com/pugjs/pug-walk#readme","_id":"pug-walk@1.1.1","scripts":{},"_shasum":"b9976240d213692e6993fbc13ae1205c54052efe","_from":".","_npmVersion":"3.10.3","_nodeVersion":"6.4.0","_npmUser":{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},"maintainers":[{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},{"name":"timothygu","email":"timothygu99@gmail.com"}],"dist":{"shasum":"b9976240d213692e6993fbc13ae1205c54052efe","tarball":"https://registry.npmjs.org/pug-walk/-/pug-walk-1.1.1.tgz"},"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/pug-walk-1.1.1.tgz_1486212036397_0.6612019978929311"},"directories":{}},"1.1.2":{"name":"pug-walk","version":"1.1.2","description":"Walk and transform a pug AST","keywords":["pug"],"dependencies":{},"devDependencies":{"pug-lexer":"^3.1.0","pug-parser":"^2.0.2"},"files":["index.js"],"repository":{"type":"git","url":"git+https://github.com/pugjs/pug-walk.git"},"author":{"name":"ForbesLindesay"},"license":"MIT","bugs":{"url":"https://github.com/pugjs/pug-walk/issues"},"homepage":"https://github.com/pugjs/pug-walk#readme","_id":"pug-walk@1.1.2","scripts":{},"_shasum":"debb24c070a95d5fc2aebf3589261833d2332e3b","_from":".","_npmVersion":"3.10.3","_nodeVersion":"6.4.0","_npmUser":{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},"maintainers":[{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},{"name":"timothygu","email":"timothygu99@gmail.com"}],"dist":{"shasum":"debb24c070a95d5fc2aebf3589261833d2332e3b","tarball":"https://registry.npmjs.org/pug-walk/-/pug-walk-1.1.2.tgz"},"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/pug-walk-1.1.2.tgz_1492475789327_0.5944479894824326"},"directories":{}},"1.1.3":{"name":"pug-walk","version":"1.1.3","description":"Walk and transform a pug AST","keywords":["pug"],"dependencies":{},"devDependencies":{"pug-lexer":"^3.1.0","pug-parser":"^3.0.0"},"files":["index.js"],"repository":{"type":"git","url":"git+https://github.com/pugjs/pug-walk.git"},"author":{"name":"ForbesLindesay"},"license":"MIT","bugs":{"url":"https://github.com/pugjs/pug-walk/issues"},"homepage":"https://github.com/pugjs/pug-walk#readme","_id":"pug-walk@1.1.3","scripts":{},"_shasum":"d7cd5b23db3ca87c636c86a0973f9cd8e030436c","_from":".","_npmVersion":"3.10.3","_nodeVersion":"6.4.0","_npmUser":{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},"maintainers":[{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},{"name":"timothygu","email":"timothygu99@gmail.com"}],"dist":{"shasum":"d7cd5b23db3ca87c636c86a0973f9cd8e030436c","tarball":"https://registry.npmjs.org/pug-walk/-/pug-walk-1.1.3.tgz"},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/pug-walk-1.1.3.tgz_1496406813833_0.6926728847902268"},"directories":{}}},"readme":"# pug-walk\n\nWalk and transform a Pug AST\n\n[![Build Status](https://img.shields.io/travis/pugjs/pug-walk/master.svg)](https://travis-ci.org/pugjs/pug-walk)\n[![Dependency Status](https://img.shields.io/david/pugjs/pug-walk.svg)](https://david-dm.org/pugjs/pug-walk)\n[![npm version](https://img.shields.io/npm/v/pug-walk.svg)](https://www.npmjs.org/package/pug-walk)\n[![Coverage Status](https://img.shields.io/codecov/c/github/pugjs/pug-walk/master.svg)](https://codecov.io/gh/pugjs/pug-walk/branch/master)\n\n## Installation\n\n    npm install pug-walk\n\n## Usage\n\n```js\nvar walk = require('pug-walk');\n```\n\n### `walk(ast, before, after, options)`\n\nTraverse and optionally transform a Pug AST.\n\n`ast` is not cloned, so any changes done to it will be done directly on the AST provided.\n\n`before` and `after` are functions with the signature `(node, replace)`. `before` is called when a node is first seen, while `after` is called after the children of the node (if any) have already been traversed.\n\nThe `replace` parameter is a callback function that can be used to replace the node in the AST. `replace` can also be used to remove this node entirely or add new nodes, by calling `replace` with an array of nodes. This is only possible when the parent node is a Block, as indicated by the property `replace.arrayAllowed`. If it is not possible, and still `replace` is called with an array, `replace` will throw an error.\n\nIf `before` returns `false`, the children of this node will not be traversed and left unchanged (unless `replace` has been called). Otherwise, the returned value of `before` is ignored. The returned value of `after` is always ignored.\n\n`options` can contain the following properties:\n\n* `includeDependencies` (boolean): Walk the AST of a loaded dependent file (i.e., includes and extends). Defaults to `false`.\n* `parents` (array<ASTNode>): Nodes that are ancestors to the current `ast`. This option is used mainly internally, and users usually do not have to specify it. Defaults to `[]`.\n\n```js\nvar lex = require('pug-lexer');\nvar parse = require('pug-parser');\n\n// Changing content of all Text nodes\n// ==================================\n\nvar source = '.my-class foo';\nvar dest = '.my-class bar';\n\nvar ast = parse(lex(source));\n\nwalk(ast, function before(node, replace) {\n  if (node.type === 'Text') {\n    node.val = 'bar';\n\n    // Alternatively, you can replace the entire node\n    // rather than just the text.\n    // replace({ type: 'Text', val: 'bar', line: node.line });\n  }\n}, {\n  includeDependencies: true\n});\n\nassert.deepEqual(parse(lex(dest)), ast);\n\n// Convert all simple <strong> elements to text\n// ============================================\n\nvar source = 'p abc #[strong NO]\\nstrong on its own line';\nvar dest = 'p abc #[| NO]\\n| on its own line';\n\nvar ast = parse(lex(source));\n\nwalk(ast, function before(node, replace) {\n  // Find all <strong> tags\n  if (node.type === 'Tag' && node.name === 'strong') {\n    var children = node.block.nodes;\n\n    // Make sure that the Tag only has one child -- the text\n    if (children.length === 1 && children[0].type === 'Text') {\n      // Replace the Tag with the Text\n      replace({ type: 'Text', val: children[0].val, line: node.line });\n    }\n  }\n}, {\n  includeDependencies: true\n});\n\nassert.deepEqual(parse(lex(dest)), ast);\n\n// Flatten blocks\n// ==============\n\nvar ast = {\n  type: 'Block',\n  nodes: [\n    { type: 'Text', val: 'a' },\n    {\n      type: 'Block',\n      nodes: [\n        { type: 'Text', val: 'b' },\n        {\n          type: 'Block',\n          nodes: [ { type: 'Text', val: 'c' } ]\n        },\n        { type: 'Text', val: 'd' }\n      ]\n    },\n    { type: 'Text', val: 'e' }\n  ]\n};\n\nvar dest = {\n  type: 'Block',\n  nodes: [\n    { type: 'Text', val: 'a' },\n    { type: 'Text', val: 'b' },\n    { type: 'Text', val: 'c' },\n    { type: 'Text', val: 'd' },\n    { type: 'Text', val: 'e' }\n  ]\n};\n\n// We need to use `after` handler instead of `before`\n// handler because we want to flatten the innermost\n// blocks first before proceeding onto outer blocks.\n\nwalk(ast, null, function after(node, replace) {\n  if (node.type === 'Block' && replace.arrayAllowed) {\n    // Replace the block with its contents\n    replace(node.nodes);\n  }\n});\n\nassert.deepEqual(dest, ast);\n```\n\n## License\n\n  MIT\n","maintainers":[{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},{"name":"timothygu","email":"timothygu99@gmail.com"}],"time":{"modified":"2017-06-02T12:34:07.927Z","created":"2015-12-12T00:28:05.587Z","0.0.0":"2015-12-12T00:28:05.587Z","0.0.3":"2015-12-23T04:00:23.616Z","0.0.4":"2016-08-17T01:38:56.300Z","1.0.0":"2016-08-23T00:45:42.415Z","1.1.0":"2017-01-24T01:07:30.408Z","1.1.1":"2017-02-04T12:40:38.170Z","1.1.2":"2017-04-18T00:36:31.196Z","1.1.3":"2017-06-02T12:33:34.720Z"},"homepage":"https://github.com/pugjs/pug-walk#readme","keywords":["pug"],"repository":{"type":"git","url":"git+https://github.com/pugjs/pug-walk.git"},"author":{"name":"ForbesLindesay"},"bugs":{"url":"https://github.com/pugjs/pug-walk/issues"},"license":"MIT","readmeFilename":"README.md","_attachments":{},"_etag":"W/\"59315b3f-3683\"","_lastModified":"Fri, 02 Jun 2017 12:34:07 GMT"}